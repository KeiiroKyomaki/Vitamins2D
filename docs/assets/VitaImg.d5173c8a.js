import{n as M,h as z,d as H,p as X,e as P,i as D,c as S,t as R,q as E,a as w,r as N,k as Y,v as k,s as I,w as A,P as B}from"./index.da482957.js";const U=R("<div></div>");function F(n={onDragStart:()=>{},onDragEnd:()=>{},dragContainerRef:()=>{},handleRef:()=>{},lockInRange:!1}){let f;const[o,d]=M({isDragging:!1,isMouseDown:!1,initLayout:{},movedLayout:{left:0,top:0,x:0,y:0,width:0,height:0},containerLayout:{}});z(()=>{s(),document.body.classList.remove("select-none"),window.removeEventListener("resize",L)}),H(()=>{o.isDragging?document.body.classList.add("select-none"):document.body.classList.remove("select-none")});let g=!1;X(()=>{f.addEventListener("mousedown",e=>{if(e.target.tagName==="INPUT"||e.target.tagName==="TEXTAREA"||e.target.tagName==="SELECT"||e.target.tagName==="BUTTON")return;let l=!1,a=e.target;for(;a!==f;){if(a.classList.contains("notDraggable")){l=!0;break}a=a.parentElement}if(l||n.handleRef&&n.handleRef()&&e.target!==n.handleRef())return;if(n.dragContainerRef&&n.dragContainerRef()&&n.lockInRange){let h=n.dragContainerRef().getBoundingClientRect();d("containerLayout",h)}d("isMouseDown",!0);let i=f.getBoundingClientRect();d("initLayout",{x:e.x-o.movedLayout.x,y:e.y-o.movedLayout.y}),g||d("initLayout",{x:e.x-o.movedLayout.x,y:e.y-o.movedLayout.y,top:i.top-o.movedLayout.y,left:i.left-o.movedLayout.x,width:i.width,height:i.height}),g=!0,u(),v()}),window.addEventListener("resize",L)});function L(e){g&&(g=!1,r({x:o.initLayout.x,y:o.initLayout.y}))}function r(e){let{x:l,y:a}=e,{initLayout:i}=o,h=i.x,T=i.y,m=l-h,y=a-T;if(n.dragContainerRef()&&n.lockInRange){let{initLayout:t,containerLayout:$}=o,_=$.x,x=$.y,C=$.width,b=$.height;m<_-t.left-.8*t.width&&(m=_-t.left-.8*t.width),y<x-t.top-.8*t.height&&(y=x-t.top-.8*t.height),m>_+C-t.left-t.width+.8*t.width&&(m=_+C-t.left-t.width+.8*t.width),y>x+b-t.top-t.height+.8*t.height&&(y=x+b-t.top-t.height+.8*t.height),d("movedLayout",{x:m,y})}else d("movedLayout",{x:m,y})}function u(){window.addEventListener("mouseup",c),window.addEventListener("mousemove",r)}function s(e){d("isMouseDown",!1),d("isDragging",!1),window.removeEventListener("mouseup",c),window.removeEventListener("mousemove",r)}function c(e){s();try{n.onDragEnd()}catch{}}function v(){d("isDragging",!0);try{n.onDragStart()}catch{}}return(()=>{const e=U.cloneNode(!0),l=f;return typeof l=="function"?P(l,e):f=e,D(e,()=>n.children),S(()=>e.style.setProperty("transform",`translate(${o.movedLayout.x+"px"},${o.movedLayout.y+"px"})`)),e})()}const V=R('<div class="pointer-events-auto cursor-move transition-transform"><img class=" select-none pointer-events-none "></div>'),j=R('<div class="fixed top-0 left-0 z-50 w-screen h-screen bg-black bg-opacity-50 animate__animated animate__faster animate__fadeIn flex justify-center items-center "></div>'),q=R('<div class=" cursor-pointer w-fit h-fit"><img></div>');function W(n={class:"",style:"",src:""}){const[f,o]=E(!0),[d,g]=E(!1),L=()=>{let r;const[u,s]=E(1);return w(B,{get children(){const c=j.cloneNode(!0);c.$$click=e=>{e.target===r&&g(!1)};const v=r;return typeof v=="function"?P(v,c):r=c,D(c,w(F,{dragContainerRef:()=>r,get children(){const e=V.cloneNode(!0),l=e.firstChild;return e.addEventListener("wheel",a=>{a.preventDefault();let i=u()-a.deltaY/500;i<.2&&(i=.2),i>5&&(i=5),s(i)}),l.style.setProperty("max-width","80vw"),l.style.setProperty("max-height","80vh"),S(a=>{const i=`transform:scale(${u()})`,h=n.src;return a._v$=k(e,i,a._v$),h!==a._v$2&&I(l,"src",a._v$2=h),a},{_v$:void 0,_v$2:void 0}),e}})),c}})};return w(N,{get when(){return f()},get children(){const r=q.cloneNode(!0),u=r.firstChild;return r.$$click=()=>g(!0),D(r,w(N,{get when(){return d()},get children(){return w(L,{})}}),null),S(s=>{const c=n.class+" pointer-events-none",v=n.style,e=n.src;return c!==s._v$3&&Y(u,s._v$3=c),s._v$4=k(u,v,s._v$4),e!==s._v$5&&I(u,"src",s._v$5=e),s},{_v$3:void 0,_v$4:void 0,_v$5:void 0}),r}})}A(["click"]);export{W as V};
